import{C as e,b as t,h as n,B as a,l as i,T as o}from"./vendor.bc4cc7a8.js";import{j as r,n as c}from"./joplinApiGenerator.4a91a44e.js";import{i as s}from"./index.f077882a.js";function l(e,t,n){!function(e,t,n){(function e(a,i){return a.map((a=>{const o=[...i,a[n.id]],r=a[n.children];return t(r?Object.assign(Object.assign({},a),{[n.children]:e(r,o)}):a,o)}))})(e,[])}(e,((e,n)=>(t(e,n),e)),n)}const d=new class{async check(){const e=new Set(function(e,t){const n=[];return l(e,((e,a)=>{n.push(Object.assign(Object.assign({},e),{[t.path]:a}))}),t),n}(await r.folderApi.listAll(),{id:"id",path:"path",children:"children"}).map((e=>e.id)));return(await c.pageToAllList(r.noteApi.list.bind(r.noteApi),{fields:["id","title","parent_id"],order_by:"user_updated_time",order_dir:"DESC"})).filter((t=>!e.has(t.parent_id)))}},p=()=>{const[c,l]=e.exports.useState([]),[p,m]=t((async()=>{const e=await d.check();console.log("list: ",e),l(e)}));return e.exports.createElement(n,{title:s.t("checkParentNotebook.title"),extra:e.exports.createElement(a,{loading:p.loading,onClick:m},s.t("checkParentNotebook.action.check"))},e.exports.createElement(i,{dataSource:c,locale:{emptyText:s.t("checkParentNotebook.listEmptyText")},renderItem:t=>e.exports.createElement(i.Item,{id:t.id,extra:e.exports.createElement(a,{onClick:()=>async function(e){await r.noteApi.remove(e),l((t=>t.filter((t=>t.id!==e))))}(t.id)},s.t("checkParentNotebook.action.remove"))},e.exports.createElement(o.Text,null,t.title))}))};export{p as default};
