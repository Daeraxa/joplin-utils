import{C as e,b as t}from"./vendor.f9e4dcb2.js";import{j as i,n,B as o}from"./joplinApiGenerator.e693c4a0.js";import{C as r}from"./index.b1748e28.js";import{L as a}from"./index.edc0b3e1.js";import{T as c}from"./index.7b616a56.js";import"./TextArea.e0cfbd9a.js";import{i as s}from"./index.5ebcd3da.js";function l(e,t,i){!function(e,t,i){(function e(n,o){return n.map((n=>{const r=[...o,n[i.id]],a=n[i.children];return t(a?Object.assign(Object.assign({},n),{[i.children]:e(a,r)}):n,r)}))})(e,[])}(e,((e,i)=>(t(e,i),e)),i)}const d=new class{async check(){const e=new Set(function(e,t){const i=[];return l(e,((e,n)=>{i.push(Object.assign(Object.assign({},e),{[t.path]:n}))}),t),i}(await i.folderApi.listAll(),{id:"id",path:"path",children:"children"}).map((e=>e.id)));return(await n.pageToAllList(i.noteApi.list.bind(i.noteApi),{fields:["id","title","parent_id"],order_by:"user_updated_time",order_dir:"DESC"})).filter((t=>!e.has(t.parent_id)))}},p=()=>{const[n,l]=e.exports.useState([]),[p,m]=t((async()=>{const e=await d.check();console.log("list: ",e),l(e)}));return e.exports.createElement(r,{title:s.t("checkParentNotebook.title"),extra:e.exports.createElement(o,{loading:p.loading,onClick:m},s.t("checkParentNotebook.action.check"))},e.exports.createElement(a,{dataSource:n,locale:{emptyText:s.t("checkParentNotebook.listEmptyText")},renderItem:t=>e.exports.createElement(a.Item,{id:t.id,extra:e.exports.createElement(o,{onClick:()=>async function(e){await i.noteApi.remove(e),l((t=>t.filter((t=>t.id!==e))))}(t.id)},s.t("checkParentNotebook.action.remove"))},e.exports.createElement(c.Text,null,t.title))}))};export{p as default};
