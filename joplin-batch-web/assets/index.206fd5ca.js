import{C as e,n as t,k as n,B as o,o as i,T as r}from"./vendor.c3e07762.js";import{j as a,s as c}from"./joplinApiGenerator.5b41d6d5.js";import{i as s}from"./index.c7ce0180.js";function l(e,t,n){!function(e,t,n){(function e(o,i){return o.map((o=>{const r=[...i,o[n.id]],a=o[n.children];return t(a?Object.assign(Object.assign({},o),{[n.children]:e(a,r)}):o,r)}))})(e,[])}(e,((e,n)=>(t(e,n),e)),n)}const d=new class{async check(){const e=new Set(function(e,t){const n=[];return l(e,((e,o)=>{n.push(Object.assign(Object.assign({},e),{[t.path]:o}))}),t),n}(await a.folderApi.listAll(),{id:"id",path:"path",children:"children"}).map((e=>e.id)));return(await c.pageToAllList(a.noteApi.list.bind(a.noteApi),{fields:["id","title","parent_id"],order_by:"user_updated_time",order_dir:"DESC"})).filter((t=>!e.has(t.parent_id)))}};export default c=>{const[l,p]=e.exports.useState([]),[m,u]=t((async()=>{const e=await d.check();console.log("list: ",e),p(e)}));return e.exports.createElement(n,{title:s.t("checkParentNotebook.title"),extra:e.exports.createElement(o,{loading:m.loading,onClick:u},s.t("checkParentNotebook.action.check"))},e.exports.createElement(i,{dataSource:l,locale:{emptyText:s.t("checkParentNotebook.listEmptyText")},renderItem:t=>e.exports.createElement(i.Item,{id:t.id,extra:e.exports.createElement(o,{onClick:()=>async function(e){await a.noteApi.remove(e),p((t=>t.filter((t=>t.id!==e))))}(t.id)},s.t("checkParentNotebook.action.remove"))},e.exports.createElement(r.Text,null,t.title))}))};
